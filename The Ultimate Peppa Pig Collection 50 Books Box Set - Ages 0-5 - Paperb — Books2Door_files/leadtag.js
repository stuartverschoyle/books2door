"use strict";var KELKOO=KELKOO||{};KELKOO.Tracking=KELKOO.Tracking||{},KELKOO.tldDomains=["com","org","edu","gov","uk","net","ca","de","jp","fr","au","us","ru","ch","it","nl","se","no","es","mil","gw","ax","wf","yt","sj","mobi","eh","mh","bv","ap","cat","kp","iq","um","arpa","pm","gb","cs","td","so","aero","biz","coop","info","jobs","museum","name","pro","travel","ac","ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","aw","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bw","by","bz","cc","cd","cf","cg","ci","ck","cl","cm","cn","co","cr","cu","cv","cx","cy","cz","dj","dk","dm","do","dz","ec","ee","eg","er","et","eu","fi","fj","fk","fm","fo","ga","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","ir","is","je","jm","jo","ke","kg","kh","ki","km","kn","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","mg","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pn","pr","ps","pt","pw","py","qa","re","ro","rw","sa","sb","sc","sd","sg","sh","si","sk","sl","sm","sn","sr","st","sv","sy","sz","tc","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uy","uz","va","vc","ve","vg","vi","vn","vu","ws","ye","yu","za","zm","zw"],KELKOO.twoPartsTldDomains=["co.bb","co.ck","co.cr","co.in","co.id","co.il","co.jp","co.nz","co.za","co.kr","co.th","co.uk","org.uk","net.uk","com.pl","biz.pl","net.pl"],KELKOO.Tracking.getQueryVarValue=function(e,t){for(var n=t.split("&"),a=0;a<n.length;a++){var o=n[a].split("=");if(e.toLowerCase()==o[0].toLowerCase())return o[1]}},KELKOO.Tracking._getDomain=function(){return document.domain},KELKOO.Tracking._getCookieDomain=function(){if(void 0!==KELKOO.Tracking.cookieDomain)return KELKOO.Tracking.cookieDomain;var e=KELKOO.Tracking._getDomain();if(e.split(".").length<3)return"."+e;var t=e.split(".").slice(-2).join("."),n=KELKOO.twoPartsTldDomains.indexOf(t);if(n>=0)return"."+e.split(".").slice(-3).join(".");var a=e.split(".").pop();return n=KELKOO.tldDomains.indexOf(a),n>=0?"."+e.split(".").slice(-2).join("."):"www."==e.substr(0,4)?e.substr(3):"."+e},KELKOO.Tracking._getUrlParamValue=function(e){var t=new RegExp("[\\?&]"+e+"=([\\w\\-]+)","gi"),n=t.exec(document.location.search),a=null;return n&&(a=n[1]),a},KELKOO.Tracking.setCookie=function(e,t,n){var a=new Date;a.setTime(a.getTime()+31536e6),n&&a.setTime(1e3*n);var o="; expires="+a.toGMTString();document.cookie=e+"="+t+o+"; path=/; domain="+this._getCookieDomain()+"; SameSite=Strict"},KELKOO.Tracking.setStorage=function(e,t){sessionStorage.setItem(e,t),localStorage.setItem(e,t)},KELKOO.Tracking.setCookieAndStorage=function(e,t,n){KELKOO.Tracking.setCookie(e,t),KELKOO.Tracking.setStorage(e,t),n&&n.push(e+"="+t)},KELKOO.Tracking.pixelAppend=function(e){var t=new XMLHttpRequest;t.responseType="blob",t.onreadystatechange=function(){if(t.readyState==XMLHttpRequest.DONE&&200==t.status){var e=document.createElement("img");e.src=URL.createObjectURL(t.response),document.body.appendChild(e)}},t.open("GET","https://s.kelkoogroup.net/k.gif",!0),t.setRequestHeader("ETag",e),t.send()},KELKOO.Tracking.gtm=function(){function e(){dataLayer.push(arguments)}var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=AW-833441087";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","AW-833441087",{cookie_prefix:"kk"});var a,o,i,r;try{a=window._kkltrack.sku}catch(e){}try{o=JSON.parse(document.querySelector('script[type="application/ld+json"]').textContent).sku}catch(e){}try{i=document.querySelector('div[property="schema:sku"]').getAttribute("content")}catch(e){}try{r=document.querySelector('meta[itemprop="sku"]').getAttribute("content")}catch(e){}var c=a||o||i||r;c&&e("event","view_item",{items:[{id:c}]})},KELKOO.Tracking.run=function(){var e=KELKOO.Tracking._getUrlParamValue("kk"),t=KELKOO.Tracking._getUrlParamValue("gclid"),n=KELKOO.Tracking._getUrlParamValue("msclkid"),a=KELKOO.Tracking._getUrlParamValue("documentid"),o=KELKOO.Tracking._getUrlParamValue("utm_content"),i=document.location.search.toLowerCase(),r=i.indexOf("kelkoo")>-1||i.indexOf("=kk")>-1||i.indexOf("leguide")>-1||i.indexOf("le-guide")>-1||i.indexOf("=lg")>-1||i.indexOf("ciao")>-1||i.indexOf("choozen")>-1||i.indexOf("koopkeus")>-1,c=[];KELKOO.Tracking.setCookieAndStorage("kk_leadtag",!0,void 0),e?KELKOO.Tracking.setCookieAndStorage("kelkooId",e,c):a&&r?KELKOO.Tracking.setCookieAndStorage("kelkooId",a,c):o&&r&&KELKOO.Tracking.setCookieAndStorage("kelkooId",o,c),t&&(e||r)&&KELKOO.Tracking.setCookieAndStorage("kk_gclid",t,c),n&&(e||r)&&KELKOO.Tracking.setCookieAndStorage("kk_msclkid",n,c),c.length>0&&(KELKOO.Tracking.pixelAppend(btoa(unescape(encodeURIComponent(c.join(";"))))),KELKOO.Tracking.gtm())},KELKOO.Tracking.run();
